// src/pages/WorkoutLog.jsx
import { useState } from "react";
import { v4 as uuidv4 } from "uuid";
import { saveWorkout } from "../lib/storage";
import { Card, CardHeader, CardContent, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";

export default function WorkoutLog() {
  const [exercise, setExercise] = useState("");
  const [sets, setSets] = useState("");
  const [reps, setReps] = useState("");
  const [weight, setWeight] = useState("");

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!exercise || !sets || !reps || !weight) return;

    const newEntry = {
      id: uuidv4(),
      date: new Date().toISOString().split("T")[0],
      exercise,
      sets: Number(sets),
      reps: Number(reps),
      weight: Number(weight),
    };

    saveWorkout(newEntry);
    setExercise("");
    setSets("");
    setReps("");
    setWeight("");
    alert("Workout saved âœ…");
  };

  return (
    <div className="p-6 max-w-lg mx-auto">
      <Card>
        <CardHeader>
          <CardTitle>Log a New Workout</CardTitle>
        </CardHeader>
        <CardContent>
          <form onSubmit={handleSubmit} className="flex flex-col gap-3">
            <Input placeholder="Exercise" value={exercise} onChange={(e) => setExercise(e.target.value)} />
            <Input placeholder="Sets" type="number" value={sets} onChange={(e) => setSets(e.target.value)} />
            <Input placeholder="Reps" type="number" value={reps} onChange={(e) => setReps(e.target.value)} />
            <Input placeholder="Weight (lbs)" type="number" value={weight} onChange={(e) => setWeight(e.target.value)} />
            <Button type="submit" className="mt-2">Save Workout</Button>
          </form>
        </CardContent>
      </Card>
    </div>
  );
}
